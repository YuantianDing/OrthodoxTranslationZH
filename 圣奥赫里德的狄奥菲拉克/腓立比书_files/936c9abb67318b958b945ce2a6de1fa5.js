(function(){let opBtn=$('.search-operators');let opWrap=opBtn.parent();let createMenu=()=>{if($('.search-operator-menu').length)return;opBtn.after(`<ul class="search-operator-menu"><li data-operator="phrase">Фраза</li><li data-operator="exact-phrase">Точная фраза</li><li data-operator="exact-words">Точные слова</li><li data-operator="word-part">Часть слова</li><li data-operator="word-between">Слово между</li><li data-operator="exclude">Исключение</li><li data-operator="or">Или</li><li data-operator="distance">Расстояние</li><li data-operator="order">Порядок</li><li data-operator="start">В начале</li><li data-operator="end">В конце</li><li data-operator="sentence">В предложении</li><li data-operator="paragraph">В параграфе</li><li data-operator="title">В названии</li><li data-operator="text">В тексте</li></ul>`);$('.search-operator-menu li').click(function(){$(this).addClass('chosen');const operator=$(this).attr('data-operator');let text=search_input.value;let fixSpace=()=>{if(!text.includes(' '))text+=' ';};switch(operator){case'phrase':text='«'+text+'»';break;case'exact-phrase':text='=«'+text+'»';break;case'exact-words':fixSpace();text='='+text.replaceAll(' ',' =');break;case'word-part':text=text+'*';break;case'word-between':text=text.replaceAll(' ',' * ');break;case'exclude':fixSpace();text=text.replace(' ',' !');break;case'or':fixSpace();text=text.replaceAll(' ',' | ');break;case'distance':text='«'+text+'»~5';break;case'order':fixSpace();text=text.replaceAll(' ',' << ');break;case'start':text='^'+text;break;case'end':text=text+'$';break;case'sentence':fixSpace();text=text.replace(' ',' SENTENCE ');break;case'paragraph':fixSpace();text=text.replace(' ',' PARAGRAPH ');break;case'title':text='@title '+text;break;case'text':text='@text '+text;break;}
search_input.value=text;});};opBtn.click(e=>{e.preventDefault();createMenu();opWrap.toggleClass('search-operators-open');$('.autocomplete-suggestions').hide();return false;});$('body').click(e=>{if(!$(e.target).closest('.search-operators, .search-operator-menu').length)
opWrap.removeClass('search-operators-open');});})();
